<html>

<head>

    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">

    <title>Reset Password</title>

    <!-- Google Fonts -->
    <link href="https://fonts.gstatic.com" rel="preconnect">
    <link
        href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i"
        rel="stylesheet">

    <!-- extra CSS Files -->
    <link href="../assets/extra/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="../assets/extra/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
    <link href="../assets/extra/boxicons/css/boxicons.min.css" rel="stylesheet">
    <link href="../assets/extra/quill/quill.snow.css" rel="stylesheet">
    <link href="../assets/extra/quill/quill.bubble.css" rel="stylesheet">
    <link href="../assets/extra/remixicon/remixicon.css" rel="stylesheet">
    <link rel="stylesheet" href="//code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">
    <!-- <link href="../assets/extra/simple-datatables/style.css" rel="stylesheet"> -->

    <!-- Template Main CSS File -->
    <link href="../assets/css/style.css" rel="stylesheet">
    <link href="../assets/css/coloris.min.css" rel="stylesheet" type="text/css">


    <!-- stripe -->
    <script src="https://js.stripe.com/v3/" async></script>


    <style>
        .colortext {
            height: 30px;
        }

        .square .clr-field button,
        .circle .clr-field button {
            width: 22px;
            height: 22px;
            left: 5px;
            right: auto;
            border-radius: 5px;
        }

        .square .clr-field input,
        .circle .clr-field input {
            padding-left: 36px;
        }

        .clr-field {
            width: 100%;
        }

        .square {
            margin-top: 5px;
        }


        .circle .clr-field button {
            border-radius: 50%;
        }

        .full .clr-field button {
            width: 100%;
            height: 100%;
            border-radius: 5px;
        }
    </style>
</head>

<body>
    <main>
        <div class="container">
            <section
                class="section register min-vh-100 d-flex flex-column align-items-center justify-content-center py-4">
                <div class="container">
                    <div class="row justify-content-center">
                        <div class="col-lg-4 col-md-6 d-flex flex-column align-items-center justify-content-center">
                            

                            <div class="card mb-3">
                                <div class="card-body">

                                    <a href="" class="center_a d-flex align-items-center w-auto">
                                        <img src="../assets/images/samples/logosize.png" alt="Stageplan Logo" class="img_size">
                                      </a>

                                    <div class="pb-2">
                                        <!-- success message -->
                                        <div class="alert alert-success d-none message_timeout" id="reset_success_msg"
                                            role="alert">
                                        </div>
                                        <!-- success message -->
                                        <h5 class="card-title p5_b15 text-center pb-0 fs-4">
                                            Reset Password
                                        </h5>
                                        <!-- <p class="text-center small">
                                            Enter a new password
                                        </p> -->
                                    </div>

                                    <form class="row g-3 needs-validation" novalidate id="resetForm">
                                        <!-- <input type="hidden" id="token" name="token" value="{{ $token }}"> -->
                                        <input type="hidden" id="hiddenEmail" name="email" value="">
                                        <div class="col-12">
                                            <label for="yourPassword" class="form-label">Password</label>
                                            <input type="password" name="password" class="form-control"
                                                id="yourPassword" required />
                                            <div class="invalid-feedback" id="passwordError">
                                            </div>
                                        </div>

                                        <div class="col-12">
                                            <label for="yourPassword" class="form-label">Confirm Password</label>
                                            <input type="password" name="confirm_password" class="form-control"
                                                id="confirm_password" required />
                                            <div class="invalid-feedback" id="confirm_passwordError">
                                            </div>
                                        </div>

                                        <div class="col-12">
                                            <button id="resetButton" class="btn btn-primary w-100"
                                                onclick="resetPassword()" type="button">
                                                <span id="loaderSpinnerForgot"
                                                    class="spinner-border spinner-border-sm d-none" role="status"
                                                    aria-hidden="true"></span>
                                                Reset Password
                                            </button>
                                        </div>

                                        <div class="col-12">
                                            <p class="small mb-0">
                                                Already have an account?
                                                <a href="../login.html">Log in</a>
                                            </p>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <script>

        function getQueryParams() {
            var params = {};
            var queryString = window.location.search.substring(1);
            var regex = /([^&=]+)=([^&]*)/g;
            var match;
            while (match = regex.exec(queryString)) {
                params[decodeURIComponent(match[1])] = decodeURIComponent(match[2]);
            }
            return params;
        }

        // Get query parameters
        var queryParams = getQueryParams();

        // Check if email parameter exists
        if (queryParams.email) {
            // Set the email in the hidden field
            document.getElementById('hiddenEmail').value = queryParams.email;
        }









        document.getElementById('yourPassword').addEventListener('keypress', function (event) {
            document.getElementById('passwordError').classList.remove('d-block');
        });

        document.getElementById('confirm_password').addEventListener('keypress', function (event) {
            document.getElementById('confirm_passwordError').classList.remove('d-block');
        });

        document.addEventListener("DOMContentLoaded", function () {
            var currentUrl = window.location.href;
            if (currentUrl.includes("reset-password/")) {
                var token = currentUrl.split("reset-password/")[1];
                document.getElementById("forgot_token").value = token;
            }
        });
    </script>

    <!-- extra JS Files -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dom-to-image/2.6.0/dom-to-image.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <script src="../assets/extra/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="../assets/extra/quill/quill.min.js"></script>
    <script src="../assets/extra/tinymce/tinymce.min.js"></script>

    <!-- Template Main JS File -->
    <script src="../assets/js/auth.js"></script>
    <script src="../assets/js/main.js"></script>
    <script src="../assets/js/dashboard.js"></script>
    <script src="../assets/js/board.js"></script>
    <script src="../assets/js/coloris.min.js"></script>

    <script type="text/javascript">
        Coloris({
            el: '.coloris',
            swatches: [
                '#264653',
                '#2a9d8f',
                '#e9c46a',
                '#f4a261',
                '#e76f51',
                '#d62828',
                '#023e8a',
                '#0077b6',
                '#0096c7',
                '#00b4d8',
                '#48cae4'
            ]
        });

        Coloris.setInstance('.instance1', {
            theme: 'pill',
            themeMode: 'dark',
            formatToggle: true,
            closeButton: true,
            clearButton: true,
            swatches: [
                '#067bc2',
                '#84bcda',
                '#80e377',
                '#ecc30b',
                '#f37748',
                '#d56062'
            ]
        });

        Coloris.setInstance('.instance2', {
            theme: 'polaroid'
        });

        Coloris.setInstance('.instance3', {
            theme: 'polaroid',
            swatchesOnly: true
        });
    </script>

</body>

</html>